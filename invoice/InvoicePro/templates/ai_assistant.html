{% extends "base.html" %}

{% block title %}AI Assistant - Revolutionary Invoice System{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="glass-card p-4">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1 class="display-6 fw-bold text-primary mb-1">
                            <i data-feather="cpu" class="me-2"></i>
                            AI Assistant
                        </h1>
                        <p class="text-muted mb-0">Your intelligent business companion powered by advanced AI</p>
                    </div>
                    <div class="col-md-4 text-end">
                        <div class="d-flex gap-2 justify-content-end">
                            <button class="btn btn-success glass-btn" id="startVoiceChat">
                                <i data-feather="mic" class="me-1"></i> Voice Chat
                            </button>
                            <button class="btn btn-outline-primary glass-btn" id="clearChat">
                                <i data-feather="refresh-cw" class="me-1"></i> Clear Chat
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- AI Assistant Interface -->
    <div class="row">
        <!-- Chat Interface -->
        <div class="col-lg-8">
            <div class="glass-card p-0 chat-container">
                <!-- Chat Header -->
                <div class="chat-header p-3 border-bottom">
                    <div class="d-flex align-items-center">
                        <div class="ai-avatar me-3">
                            <i data-feather="cpu" size="24" class="text-primary"></i>
                        </div>
                        <div>
                            <h6 class="mb-0 fw-bold">Revolutionary AI Assistant</h6>
                            <small class="text-success">
                                <span class="status-indicator"></span> Online & Ready
                            </small>
                        </div>
                        <div class="ms-auto">
                            <div class="ai-status-indicators">
                                <span class="indicator active" title="Natural Language Processing">
                                    <i data-feather="message-circle" size="16"></i>
                                </span>
                                <span class="indicator active" title="Voice Recognition">
                                    <i data-feather="mic" size="16"></i>
                                </span>
                                <span class="indicator active" title="Predictive Analytics">
                                    <i data-feather="trending-up" size="16"></i>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Chat Messages -->
                <div class="chat-messages" id="chatMessages">
                    <!-- Welcome Message -->
                    <div class="message ai-message">
                        <div class="message-avatar">
                            <i data-feather="cpu" size="20" class="text-primary"></i>
                        </div>
                        <div class="message-content">
                            <div class="message-bubble ai-bubble">
                                <p class="mb-2">ðŸ‘‹ Hello! I'm your AI-powered business assistant. I can help you with:</p>
                                <ul class="mb-0">
                                    <li>Creating invoices through voice commands</li>
                                    <li>Analyzing business performance and trends</li>
                                    <li>Predicting client payment behavior</li>
                                    <li>Generating insights and recommendations</li>
                                    <li>Automating routine tasks</li>
                                </ul>
                            </div>
                            <small class="text-muted">Just now</small>
                        </div>
                    </div>
                </div>
                
                <!-- Chat Input -->
                <div class="chat-input p-3 border-top">
                    <div class="input-group">
                        <button class="btn btn-outline-secondary" id="voiceInputBtn" title="Voice Input">
                            <i data-feather="mic" size="16"></i>
                        </button>
                        <input type="text" class="form-control glass-input" id="messageInput" 
                               placeholder="Ask me anything about your business..." 
                               autocomplete="off">
                        <button class="btn btn-primary" id="sendMessageBtn">
                            <i data-feather="send" size="16"></i>
                        </button>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="quick-actions mt-2">
                        <small class="text-muted me-2">Quick actions:</small>
                        <button class="btn btn-sm btn-outline-primary me-1" onclick="sendQuickMessage('Show me today\'s revenue')">
                            ðŸ“Š Today's Revenue
                        </button>
                        <button class="btn btn-sm btn-outline-primary me-1" onclick="sendQuickMessage('Create an invoice for my top client')">
                            ðŸ“„ Create Invoice
                        </button>
                        <button class="btn btn-sm btn-outline-primary me-1" onclick="sendQuickMessage('Which clients need follow-up?')">
                            ðŸ‘¥ Client Follow-up
                        </button>
                        <button class="btn btn-sm btn-outline-primary" onclick="sendQuickMessage('Analyze my payment trends')">
                            ðŸ’° Payment Analysis
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- AI Capabilities Panel -->
        <div class="col-lg-4">
            <!-- AI Features -->
            <div class="glass-card p-4 mb-4">
                <h6 class="fw-bold mb-3">
                    <i data-feather="zap" class="me-2 text-warning"></i>
                    AI Capabilities
                </h6>
                
                <div class="capability-list">
                    <div class="capability-item mb-3">
                        <div class="d-flex align-items-center">
                            <div class="capability-icon bg-success bg-opacity-10 text-success me-3">
                                <i data-feather="mic" size="20"></i>
                            </div>
                            <div>
                                <h6 class="mb-1">Voice Commands</h6>
                                <small class="text-muted">Create invoices and manage data using natural speech</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="capability-item mb-3">
                        <div class="d-flex align-items-center">
                            <div class="capability-icon bg-primary bg-opacity-10 text-primary me-3">
                                <i data-feather="cpu" size="20"></i>
                            </div>
                            <div>
                                <h6 class="mb-1">Predictive Analytics</h6>
                                <small class="text-muted">Forecast cash flow and client payment behavior</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="capability-item mb-3">
                        <div class="d-flex align-items-center">
                            <div class="capability-icon bg-info bg-opacity-10 text-info me-3">
                                <i data-feather="camera" size="20"></i>
                            </div>
                            <div>
                                <h6 class="mb-1">Document Processing</h6>
                                <small class="text-muted">Extract data from receipts and invoices using OCR</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="capability-item mb-3">
                        <div class="d-flex align-items-center">
                            <div class="capability-icon bg-warning bg-opacity-10 text-warning me-3">
                                <i data-feather="target" size="20"></i>
                            </div>
                            <div>
                                <h6 class="mb-1">Smart Suggestions</h6>
                                <small class="text-muted">AI-powered item and pricing recommendations</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Recent AI Insights -->
            <div class="glass-card p-4 mb-4">
                <h6 class="fw-bold mb-3">
                    <i data-feather="lightbulb" class="me-2 text-info"></i>
                    Recent Insights
                </h6>
                
                <div class="insight-list">
                    <div class="insight-item mb-3 p-2 glass-card-sm">
                        <div class="d-flex justify-content-between align-items-start">
                            <div>
                                <small class="text-primary fw-medium">Payment Prediction</small>
                                <p class="mb-1 small">Client "ABC Corp" is likely to pay 3 days early based on historical patterns.</p>
                                <small class="text-muted">2 hours ago</small>
                            </div>
                            <i data-feather="trending-up" size="16" class="text-success"></i>
                        </div>
                    </div>
                    
                    <div class="insight-item mb-3 p-2 glass-card-sm">
                        <div class="d-flex justify-content-between align-items-start">
                            <div>
                                <small class="text-success fw-medium">Revenue Forecast</small>
                                <p class="mb-1 small">Next month's revenue projected to increase by 15% based on current trends.</p>
                                <small class="text-muted">1 day ago</small>
                            </div>
                            <i data-feather="dollar-sign" size="16" class="text-primary"></i>
                        </div>
                    </div>
                    
                    <div class="insight-item mb-3 p-2 glass-card-sm">
                        <div class="d-flex justify-content-between align-items-start">
                            <div>
                                <small class="text-warning fw-medium">Client Alert</small>
                                <p class="mb-1 small">High-value client "XYZ Ltd" hasn't placed an order in 30 days.</p>
                                <small class="text-muted">2 days ago</small>
                            </div>
                            <i data-feather="alert-triangle" size="16" class="text-warning"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- AI Learning Progress -->
            <div class="glass-card p-4">
                <h6 class="fw-bold mb-3">
                    <i data-feather="activity" class="me-2 text-success"></i>
                    AI Learning Progress
                </h6>
                
                <div class="learning-metrics">
                    <div class="metric-item mb-3">
                        <div class="d-flex justify-content-between align-items-center mb-1">
                            <small class="text-muted">Data Processing</small>
                            <small class="fw-medium">98%</small>
                        </div>
                        <div class="progress">
                            <div class="progress-bar bg-success" style="width: 98%"></div>
                        </div>
                    </div>
                    
                    <div class="metric-item mb-3">
                        <div class="d-flex justify-content-between align-items-center mb-1">
                            <small class="text-muted">Pattern Recognition</small>
                            <small class="fw-medium">85%</small>
                        </div>
                        <div class="progress">
                            <div class="progress-bar bg-primary" style="width: 85%"></div>
                        </div>
                    </div>
                    
                    <div class="metric-item mb-3">
                        <div class="d-flex justify-content-between align-items-center mb-1">
                            <small class="text-muted">Prediction Accuracy</small>
                            <small class="fw-medium">92%</small>
                        </div>
                        <div class="progress">
                            <div class="progress-bar bg-info" style="width: 92%"></div>
                        </div>
                    </div>
                    
                    <div class="metric-item">
                        <div class="d-flex justify-content-between align-items-center mb-1">
                            <small class="text-muted">Voice Recognition</small>
                            <small class="fw-medium">96%</small>
                        </div>
                        <div class="progress">
                            <div class="progress-bar bg-warning" style="width: 96%"></div>
                        </div>
                    </div>
                </div>
                
                <div class="ai-stats mt-3 pt-3 border-top">
                    <div class="row text-center">
                        <div class="col-6">
                            <h6 class="text-primary mb-0">1,247</h6>
                            <small class="text-muted">Interactions</small>
                        </div>
                        <div class="col-6">
                            <h6 class="text-success mb-0">94.2%</h6>
                            <small class="text-muted">Accuracy</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Voice Recording Modal -->
<div class="modal fade" id="voiceRecordingModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content glass-modal">
            <div class="modal-body text-center">
                <div class="voice-animation mb-3">
                    <div class="pulse-rings">
                        <div class="pulse-ring"></div>
                        <div class="pulse-ring"></div>
                        <div class="pulse-ring"></div>
                    </div>
                    <div class="voice-icon">
                        <i data-feather="mic" size="48" class="text-primary"></i>
                    </div>
                </div>
                <h5>Listening...</h5>
                <p class="text-muted" id="voiceStatus">Speak clearly and naturally</p>
                <div class="voice-controls mt-4">
                    <button class="btn btn-outline-secondary me-2" id="stopRecording">
                        <i data-feather="square" class="me-1"></i> Stop
                    </button>
                    <button class="btn btn-primary" id="pauseRecording">
                        <i data-feather="pause" class="me-1"></i> Pause
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
let isRecording = false;
let recognition = null;
let chatMessages = [];

document.addEventListener('DOMContentLoaded', function() {
    initializeAIAssistant();
    setupEventListeners();
    
    // Initialize speech recognition if available
    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
        initializeSpeechRecognition();
    }
});

function initializeAIAssistant() {
    // Add welcome message to chat history
    chatMessages.push({
        type: 'ai',
        content: 'Hello! I\'m your AI assistant. How can I help you today?',
        timestamp: new Date()
    });
    
    // Auto-scroll to bottom
    scrollChatToBottom();
}

function setupEventListeners() {
    // Send message on Enter key
    document.getElementById('messageInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            sendMessage();
        }
    });
    
    // Send button click
    document.getElementById('sendMessageBtn').addEventListener('click', sendMessage);
    
    // Voice input button
    document.getElementById('voiceInputBtn').addEventListener('click', startVoiceInput);
    
    // Start voice chat button
    document.getElementById('startVoiceChat').addEventListener('click', startVoiceChat);
    
    // Clear chat button
    document.getElementById('clearChat').addEventListener('click', clearChat);
}

function sendMessage() {
    const input = document.getElementById('messageInput');
    const message = input.value.trim();
    
    if (message) {
        // Add user message
        addMessage('user', message);
        input.value = '';
        
        // Show typing indicator
        showTypingIndicator();
        
        // Simulate AI processing and response
        setTimeout(() => {
            hideTypingIndicator();
            processAIResponse(message);
        }, 1500);
    }
}

function sendQuickMessage(message) {
    document.getElementById('messageInput').value = message;
    sendMessage();
}

function addMessage(type, content, timestamp = new Date()) {
    const messagesContainer = document.getElementById('chatMessages');
    const messageElement = document.createElement('div');
    messageElement.className = `message ${type}-message`;
    
    const avatar = type === 'ai' ? 
        '<div class="message-avatar"><i data-feather="cpu" size="20" class="text-primary"></i></div>' :
        '<div class="message-avatar user-avatar">U</div>';
    
    const bubbleClass = type === 'ai' ? 'ai-bubble' : 'user-bubble';
    
    messageElement.innerHTML = `
        ${avatar}
        <div class="message-content">
            <div class="message-bubble ${bubbleClass}">
                ${content}
            </div>
            <small class="text-muted">${formatTime(timestamp)}</small>
        </div>
    `;
    
    messagesContainer.appendChild(messageElement);
    
    // Replace feather icons
    feather.replace();
    
    // Scroll to bottom
    scrollChatToBottom();
    
    // Store in chat history
    chatMessages.push({ type, content, timestamp });
}

function showTypingIndicator() {
    const messagesContainer = document.getElementById('chatMessages');
    const typingElement = document.createElement('div');
    typingElement.className = 'message ai-message typing-indicator';
    typingElement.id = 'typingIndicator';
    
    typingElement.innerHTML = `
        <div class="message-avatar">
            <i data-feather="cpu" size="20" class="text-primary"></i>
        </div>
        <div class="message-content">
            <div class="message-bubble ai-bubble">
                <div class="typing-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    `;
    
    messagesContainer.appendChild(typingElement);
    feather.replace();
    scrollChatToBottom();
}

function hideTypingIndicator() {
    const typingIndicator = document.getElementById('typingIndicator');
    if (typingIndicator) {
        typingIndicator.remove();
    }
}

function processAIResponse(userMessage) {
    // Simulate AI processing based on message content
    let response = generateAIResponse(userMessage);
    addMessage('ai', response);
}

function generateAIResponse(message) {
    const lowerMessage = message.toLowerCase();
    
    // Simple pattern matching for demo purposes
    if (lowerMessage.includes('revenue') || lowerMessage.includes('income')) {
        return `ðŸ“Š Based on your current data, your total revenue is â‚¹2,45,000 this month. That's a 12% increase from last month! Would you like me to show you a detailed breakdown or revenue trends?`;
    }
    
    if (lowerMessage.includes('invoice') && lowerMessage.includes('create')) {
        return `ðŸ“„ I can help you create an invoice! To get started, please tell me:
        <br>â€¢ Which client is this invoice for?
        <br>â€¢ What items or services should I include?
        <br>â€¢ Any specific due date?
        <br><br>You can also use voice commands by saying "Create invoice for [client name]"`;
    }
    
    if (lowerMessage.includes('client') && (lowerMessage.includes('follow') || lowerMessage.includes('contact'))) {
        return `ðŸ‘¥ Here are clients who need follow-up:
        <br>â€¢ <strong>ABC Corp</strong> - Invoice overdue by 5 days
        <br>â€¢ <strong>XYZ Ltd</strong> - No activity in 30 days (high-value client)
        <br>â€¢ <strong>Tech Solutions</strong> - Payment reminder needed
        <br><br>Would you like me to draft follow-up emails or set reminders?`;
    }
    
    if (lowerMessage.includes('payment') && lowerMessage.includes('trend')) {
        return `ðŸ’° Your payment trends analysis:
        <br>â€¢ <strong>Average payment delay:</strong> 8.5 days
        <br>â€¢ <strong>Payment success rate:</strong> 94.2%
        <br>â€¢ <strong>Best performing clients:</strong> Pay 3 days early on average
        <br>â€¢ <strong>Risk clients:</strong> 2 clients with 30+ day delays
        <br><br>Recommendation: Implement automated reminders to reduce delay by 40%.`;
    }
    
    if (lowerMessage.includes('help') || lowerMessage.includes('what can you do')) {
        return `ðŸ¤– I'm your AI business assistant! Here's what I can help you with:
        <br><br><strong>ðŸ“Š Analytics & Insights:</strong>
        <br>â€¢ Revenue forecasting and trend analysis
        <br>â€¢ Client payment behavior predictions
        <br>â€¢ Business performance metrics
        <br><br><strong>ðŸ“„ Invoice Management:</strong>
        <br>â€¢ Create invoices via voice or text
        <br>â€¢ Smart item suggestions based on client history
        <br>â€¢ Automated pricing optimization
        <br><br><strong>ðŸ‘¥ Client Management:</strong>
        <br>â€¢ Risk assessment and scoring
        <br>â€¢ Follow-up recommendations
        <br>â€¢ Communication insights
        <br><br>Just ask me anything!`;
    }
    
    // Default response
    return `I understand you're asking about "${message}". I'm continuously learning to better assist you. Could you provide more specific details or try rephrasing your question? 

You can also try these commands:
â€¢ "Show revenue trends"
â€¢ "Create invoice for [client]"
â€¢ "Analyze payment patterns"
â€¢ "Help with client follow-up"`;
}

function initializeSpeechRecognition() {
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    
    if (SpeechRecognition) {
        recognition = new SpeechRecognition();
        recognition.continuous = false;
        recognition.interimResults = true;
        recognition.lang = 'en-US';
        
        recognition.onstart = function() {
            isRecording = true;
            document.getElementById('voiceStatus').textContent = 'Listening... Speak now';
        };
        
        recognition.onresult = function(event) {
            let finalTranscript = '';
            
            for (let i = event.resultIndex; i < event.results.length; i++) {
                if (event.results[i].isFinal) {
                    finalTranscript += event.results[i][0].transcript;
                }
            }
            
            if (finalTranscript) {
                document.getElementById('messageInput').value = finalTranscript;
                document.getElementById('voiceStatus').textContent = 'Voice input captured successfully!';
            }
        };
        
        recognition.onerror = function(event) {
            console.error('Speech recognition error:', event.error);
            document.getElementById('voiceStatus').textContent = 'Voice recognition failed. Please try again.';
        };
        
        recognition.onend = function() {
            isRecording = false;
            hideVoiceModal();
        };
    }
}

function startVoiceInput() {
    if (recognition && !isRecording) {
        showVoiceModal();
        recognition.start();
    } else {
        alert('Voice recognition is not supported in this browser.');
    }
}

function startVoiceChat() {
    if (recognition) {
        addMessage('ai', 'ðŸŽ¤ Voice chat mode activated! You can now speak your commands and I\'ll respond. Try saying "Show me today\'s revenue" or "Create invoice for ABC Corp".');
        startVoiceInput();
    } else {
        alert('Voice features are not supported in this browser.');
    }
}

function showVoiceModal() {
    const modal = new bootstrap.Modal(document.getElementById('voiceRecordingModal'));
    modal.show();
}

function hideVoiceModal() {
    const modal = bootstrap.Modal.getInstance(document.getElementById('voiceRecordingModal'));
    if (modal) {
        modal.hide();
    }
}

function clearChat() {
    if (confirm('Are you sure you want to clear the chat history?')) {
        const messagesContainer = document.getElementById('chatMessages');
        messagesContainer.innerHTML = '';
        chatMessages = [];
        
        // Add welcome message back
        setTimeout(() => {
            addMessage('ai', 'ðŸ‘‹ Chat cleared! How can I assist you today?');
        }, 300);
    }
}

function scrollChatToBottom() {
    const messagesContainer = document.getElementById('chatMessages');
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
}

function formatTime(date) {
    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
}

// Voice recording modal event listeners
document.getElementById('stopRecording')?.addEventListener('click', function() {
    if (recognition && isRecording) {
        recognition.stop();
    }
});

document.getElementById('pauseRecording')?.addEventListener('click', function() {
    if (recognition && isRecording) {
        recognition.stop();
    }
});
</script>

<style>
.chat-container {
    height: 600px;
    display: flex;
    flex-direction: column;
}

.chat-header {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
}

.ai-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: rgba(59, 130, 246, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
}

.status-indicator {
    width: 8px;
    height: 8px;
    background: #10b981;
    border-radius: 50%;
    display: inline-block;
    margin-right: 5px;
    animation: pulse 2s infinite;
}

.ai-status-indicators {
    display: flex;
    gap: 8px;
}

.indicator {
    padding: 4px;
    border-radius: 4px;
    background: rgba(0, 0, 0, 0.05);
}

.indicator.active {
    color: #10b981;
}

.chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 20px;
    background: rgba(255, 255, 255, 0.02);
}

.message {
    display: flex;
    margin-bottom: 20px;
    align-items: flex-start;
}

.user-message {
    flex-direction: row-reverse;
}

.message-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 12px;
    flex-shrink: 0;
}

.user-avatar {
    background: rgba(59, 130, 246, 0.1);
    color: #3b82f6;
    font-weight: bold;
}

.message-content {
    max-width: 70%;
}

.user-message .message-content {
    text-align: right;
}

.message-bubble {
    padding: 12px 16px;
    border-radius: 18px;
    margin-bottom: 4px;
    word-wrap: break-word;
}

.ai-bubble {
    background: rgba(59, 130, 246, 0.1);
    border: 1px solid rgba(59, 130, 246, 0.2);
    color: #1f2937;
}

.user-bubble {
    background: #3b82f6;
    color: white;
}

.typing-indicator .typing-dots {
    display: flex;
    gap: 4px;
}

.typing-dots span {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #6b7280;
    animation: typing 1.4s infinite;
}

.typing-dots span:nth-child(2) {
    animation-delay: 0.2s;
}

.typing-dots span:nth-child(3) {
    animation-delay: 0.4s;
}

.quick-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    align-items: center;
}

.capability-icon {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.insight-item {
    transition: transform 0.2s ease;
}

.insight-item:hover {
    transform: translateX(5px);
}

.progress {
    height: 6px;
    background: rgba(0, 0, 0, 0.1);
    border-radius: 3px;
}

.voice-animation {
    position: relative;
    width: 120px;
    height: 120px;
    margin: 0 auto;
}

.pulse-rings {
    position: absolute;
    width: 100%;
    height: 100%;
}

.pulse-ring {
    position: absolute;
    border: 2px solid #3b82f6;
    border-radius: 50%;
    animation: pulse-ring 2s infinite;
}

.pulse-ring:nth-child(1) {
    animation-delay: 0s;
}

.pulse-ring:nth-child(2) {
    animation-delay: 0.6s;
}

.pulse-ring:nth-child(3) {
    animation-delay: 1.2s;
}

.voice-icon {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 60px;
    height: 60px;
    background: rgba(59, 130, 246, 0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

@keyframes typing {
    0%, 60%, 100% { transform: translateY(0); }
    30% { transform: translateY(-10px); }
}

@keyframes pulse-ring {
    0% {
        transform: scale(0.8);
        opacity: 1;
    }
    100% {
        transform: scale(2);
        opacity: 0;
    }
}

/* Scrollbar styling */
.chat-messages::-webkit-scrollbar {
    width: 6px;
}

.chat-messages::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.1);
    border-radius: 3px;
}

.chat-messages::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.3);
    border-radius: 3px;
}

.chat-messages::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.5);
}
</style>
{% endblock %}
